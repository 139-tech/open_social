// Regions
//
// We have split up the layout of the interface into regions. In Drupal
// we can assign blocks to these regions. Each region can contain different
// views/blocks/elements, based on the context of the node or page.
//
// `<i>`The complementary_bottom region will be hidden on small screens.`</i>`
//
// Markup: regions.twig
//
// Weight: 1
//
// Style guide: templates.regions

// Layout default
//
// The default layout consists of the content in a 2/3 column with a complementary region
// in the sidebar with a width of 1/3.
//
// Markup: layout-default.twig
//
// Weight: 2
//
// Style guide: templates.layout-default

// Layout 2 columns
//
// As mentioned above we have a default layout for Open Social. You also choose a 2 columns layout.
// We do not use a module for that, but as a site manager make sure blocks
// are placed in the correct region. To use the 2 columns layout,
// you must place you blocks in the region "Sidebar First".
// The other argument that must be true is that the complementary regions are empty. To prevent
// a site manager from showing blocks in both the complementary region and the sidebar
// first region, we add this argument for the display of the latter.
//
// `{% if page.sidebar_first and not page.complementary_top and not page.complementary_bottom %}`
//
// Markup: layout-2columns.twig
//
// Weight: 3
//
// Style guide: templates.layout-2cols

// Layout 3 columns
//
// Besides a two column layout, you can also get 3 columns. For this you can fill the region
// sidebar second with blocks. When you use sidebar second and sidebar first
// the columns will take up an equal share of the row.
//
// Markup: layout-3columns.twig
//
// Weight: 4
//
// Style guide: templates.layout-3cols

@import "settings";

body {
  overflow-x: hidden;
}

.container {
  position: relative;
  margin-left: auto;
  margin-right: auto;

  @include for-tablet-landscape-up {
    max-width: 1160px;
  }
}

.row {
  display: flex;
  width: 100%;
  flex-wrap: wrap;
}

.main-container {
  overflow: hidden;
  min-height: 100%;
  min-height: calc(100vh - 50px);
  padding-top: 50px;
  padding-bottom: 100px;
  position: relative;
  z-index: 0;
  width: 100%;
}

.region--title {
  flex-basis: 100%;
  max-width: 100%;

  @include for-tablet-landscape-up {
    margin-top: 1rem;
  }
}

.region--hero {
  max-width: 100%;
}

.content--wrapper {
  display: flex;
  flex-wrap: wrap;
  flex: 0 0 100%;
  max-width: 100%;

  .content--side {
    flex: 0 0 100%;
    max-width: 100%;
  }

  &.left-aside {

    @include for-tablet-landscape-up {
      .region--complementary {
        order: 1;
      }

      .content--side {
        order: 2;
      }
    }
  }
}

.region--hero .cover-wrap,
.region--content-top,
.region--content-bottom {
  @extend .container;
}

.region--secondary-navigation {
  max-width: inherit;
  width: 100%;
  margin: -44px 0 0;
  position: relative;
  z-index: 2;
  padding-left: 0;
  padding-right: 0;

  @include for-tablet-landscape-up {
    max-width: 100%;
  }
}

.region--content-bottom,
.region--sidebar-first,
.region--sidebar-second {
  margin-top: 1rem;
}

.region--content {
  @include for-tablet-landscape-up {
    margin-top: 20px;
  }
}

// The direct child selector solves the problem in the style guide
.layout--with-complementary {
  flex-direction: column;

  .content--wrapper {
    flex: 0 0 auto;
    max-width: none;

    @include for-desktop-up {
      margin: 0 -20px;
    }
  }

  .content--side {
    flex: 0 0 100%;
    max-width: 100%;

    @include for-tablet-landscape-up {
      flex: 0 0 (100%/1.5);
      max-width: (100%/1.5);
      order: 2;
    }
  }

  .region--content {
    padding-left: 1rem;
    padding-right: 1rem;

    @include for-desktop-up {
      padding-left: 20px;
      padding-right: 20px;
    }
  }

  .content--side_wrapper {
    padding-left: 1rem;
    padding-right: 1rem;

    @include for-desktop-up {
      padding-left: 20px;
      padding-right: 20px;
    }

    .region--content {
      padding: 0;
    }
  }
}

.region--complementary {
  margin-top: 1rem;
  padding-left: 1em;
  padding-right: 1em;
  flex-basis: 100%;
  max-width: 100%;
  position: relative;

  @include for-tablet-landscape-up {
    flex: 0 1 (100%/3);
    order: 3;
    max-width: (100%/3);
    margin-top: 20px;
  }

  @include for-desktop-up {
    padding-right: 20px;
    padding-left: 20px;
  }

}

.layout--with-two-columns {
  .content--side,
  .region--sidebar-first,
  .region--sidebar-second {
    flex-basis: 100%;
    padding-left: 1em;
    padding-right: 1em;

    @include for-tablet-landscape-up {
      flex: 0 0 50%;
      max-width: 50%;
    }
  }

  @include for-desktop-up {

    .content--side {
      padding-left: 0;
    }

    .region--sidebar-first,
    .region--sidebar-second {
      padding-right: 0;
    }

  }

}

.layout--with-three-columns {
  .content--side,
  .region--sidebar-first,
  .region--sidebar-second {
    padding-left: 1em;
    padding-right: 1em;
    flex-basis: 100%;

    @include for-tablet-landscape-up {
      flex: 0 0 (100%/3);
      max-width: (100%/3);
    }

  }

  @include for-desktop-up {
    .content--side {
      padding-left: 0;
    }

    .region--sidebar-second {
      padding-right: 0;
    }

  }

}

// hide region on mobile
.region--complementary-bottom {
  display: none;

  // Show region on bigger screens
  @include for-tablet-landscape-up {
    display: block;
  }
}

@include for-tablet-landscape-up {
  .region--complementary-top {
    margin-top: 0;
  }
}

body {
  &.path-group,
  &.details,
  &.path-user {
    .layout--with-complementary {
      flex-direction: column;

      .navbar-secondary {
        flex: 0 0 100%;
        max-width: 100%;

        @include for-tablet-landscape-up {
          flex: 0 0 (100%/1.5);
          max-width: (100%/1.5);
          order: 2;
        }
      }

      .region--secondary-navigation {
        @include for-tablet-landscape-up {
          padding-left: 1rem;
          padding-right: 2rem;
        }

        @include for-desktop-up {
          padding-right: 20px;
          padding-left: 0;
        }
      }

      &.sidebar-left {
        .region--complementary {
          order: 1;
        }

        .region--secondary-navigation {
          display: flex;
          justify-content: flex-end;

          @include for-tablet-landscape-up {
            padding-left: 2rem;
            padding-right: 1rem;
          }

          @include for-desktop-up {
            padding-left: 20px;
            padding-right: 0;
          }
        }
      }
    }

    .region--secondary-navigation {
      z-index: 3;
    }

    .region--complementary_wrapper {
      position: relative;
      z-index: 1000;

      @include for-tablet-landscape-up {
        top: -64px;
      }
    }

    .content--side_wrapper .region--content,
    .region--complementary_wrapper {
      border-radius: 2px;
      background: #fff;
      box-shadow: 0 2px 4px #4a4a4a;
    }

    .region--complementary-top + .region--complementary-bottom {
      margin-top: 0;
    }

    .region--complementary-bottom,
    .region--complementary-top {
      padding-bottom: 0;
      border-radius: 0;

      @include for-tablet-landscape-down {
        top: 0;
      }
    }
  }
}
